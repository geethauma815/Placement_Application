{"ast":null,"code":"/*import { useState } from \"react\";\nimport { ethers } from \"ethers\";\nimport axios from \"axios\";\n\nfunction PostJob() {\n  const [mode, setMode] = useState(\"paid\"); // \"paid\" or \"free\"\n\n  const [form, setForm] = useState({\n    _id: \"\",\n    profile: \"\",\n    desc: \"\",\n    exp: \"\",\n    techs: \"\",\n  });\n\n  const [walletAddress, setWalletAddress] = useState(\"\");\n  const [paid, setPaid] = useState(false);\n  const platformFee = \"0.001\"; // ETH or MATIC\n\n  const handleChange = (e) => {\n    setForm({ ...form, [e.target.name]: e.target.value });\n  };\n\n  const connectWallet = async () => {\n    if (!window.ethereum) return alert(\"MetaMask not detected\");\n\n    try {\n      const provider = new ethers.BrowserProvider(window.ethereum);\n      const accounts = await window.ethereum.request({ method: \"eth_requestAccounts\" });\n      setWalletAddress(accounts[0]);\n    } catch (err) {\n      alert(\"Wallet connection failed\");\n    }\n  };\n\n  const payPlatformFee = async () => {\n    try {\n      const provider = new ethers.BrowserProvider(window.ethereum);\n      const signer = await provider.getSigner();\n      const tx = await signer.sendTransaction({\n        to: \"0xF2f8466780f45536bC254d0882A4F6608b631b88\",\n        value: ethers.parseEther(platformFee),\n      });\n      await tx.wait();\n      alert(\"Payment Successful\");\n      setPaid(true);\n    } catch (err) {\n      alert(\"Payment failed: \" + err.message);\n    }\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n\n    if (mode === \"paid\" && !paid) {\n      return alert(\"Please pay the platform fee first\");\n    }\n\n    const payload = {\n      ...form,\n      exp: parseInt(form.exp),\n      techs: form.techs.split(\",\").map((t) => t.trim()),\n    };\n\n    try {\n      const res = await axios.post(\"http://localhost:5000/api/jobs\", payload);\n      alert(res.data.message);\n    } catch (err) {\n      alert(\"Error: \" + err.response.data.error);\n    }\n  };\n\n  return (\n    <div style={containerStyle}>\n      <div style={formBox}>\n        <h2 style={headingStyle}>Post a New Job</h2>\n\n        {}\n        <div style={{ marginBottom: \"1rem\" }}>\n          <button onClick={() => setMode(\"paid\")} style={mode === \"paid\" ? activeBtn : inactiveBtn}>\n            Post With Payment\n          </button>\n          <button onClick={() => setMode(\"free\")} style={mode === \"free\" ? activeBtn : inactiveBtn}>\n            Post Without Payment (Demo)\n          </button>\n        </div>\n\n        {}\n        {mode === \"paid\" && !walletAddress && (\n          <button onClick={connectWallet} style={btnStyle}>Connect Wallet</button>\n        )}\n        {mode === \"paid\" && walletAddress && !paid && (\n          <button onClick={payPlatformFee} style={btnStyle}>Pay {platformFee} ETH</button>\n        )}\n        {mode === \"paid\" && paid && (\n          <p style={{ color: \"green\", fontWeight: \"bold\" }}>✔ Payment Complete</p>\n        )}\n\n        <form onSubmit={handleSubmit}>\n          <input name=\"_id\" placeholder=\"Job ID\" onChange={handleChange} required style={inputStyle} />\n          <input name=\"profile\" placeholder=\"Profile\" onChange={handleChange} required style={inputStyle} />\n          <textarea name=\"desc\" placeholder=\"Description\" onChange={handleChange} required style={textareaStyle} />\n          <input name=\"exp\" type=\"number\" placeholder=\"Experience (years)\" onChange={handleChange} required style={inputStyle} />\n          <input name=\"techs\" placeholder=\"Techs (comma separated)\" onChange={handleChange} required style={inputStyle} />\n          <button type=\"submit\" style={submitStyle}>\n            Post Job\n          </button>\n        </form>\n      </div>\n    </div>\n  );\n}\n\n// Styles\nconst containerStyle = {\n  display: \"flex\",\n  justifyContent: \"center\",\n  alignItems: \"center\",\n  minHeight: \"100vh\",\n  background: \"linear-gradient(to right, #e0c3fc, #8ec5fc)\",\n};\n\nconst formBox = {\n  background: \"#fff\",\n  padding: \"2rem\",\n  borderRadius: \"10px\",\n  boxShadow: \"0 4px 20px rgba(0, 0, 0, 0.1)\",\n  width: \"400px\",\n  textAlign: \"center\",\n};\n\nconst headingStyle = {\n  marginBottom: \"1rem\",\n  color: \"#4b0082\",\n};\n\nconst inputStyle = {\n  width: \"100%\",\n  padding: \"10px\",\n  marginBottom: \"1rem\",\n  border: \"1px solid #ccc\",\n  borderRadius: \"5px\",\n};\n\nconst textareaStyle = {\n  width: \"100%\",\n  padding: \"10px\",\n  height: \"80px\",\n  marginBottom: \"1rem\",\n  border: \"1px solid #ccc\",\n  borderRadius: \"5px\",\n};\n\nconst btnStyle = {\n  marginBottom: \"1rem\",\n  padding: \"10px 20px\",\n  backgroundColor: \"#6a1b9a\",\n  color: \"white\",\n  border: \"none\",\n  borderRadius: \"5px\",\n  cursor: \"pointer\",\n  fontSize: \"15px\",\n};\n\nconst submitStyle = {\n  width: \"100%\",\n  padding: \"12px\",\n  backgroundColor: \"#4b0082\",\n  color: \"white\",\n  border: \"none\",\n  borderRadius: \"6px\",\n  fontSize: \"16px\",\n  cursor: \"pointer\",\n};\n\nconst activeBtn = {\n  ...btnStyle,\n  backgroundColor: \"#4b0082\",\n  marginRight: \"10px\",\n};\n\nconst inactiveBtn = {\n  ...btnStyle,\n  backgroundColor: \"#bbb\",\n  marginRight: \"10px\",\n};\n\nexport default PostJob;*/","map":{"version":3,"names":[],"sources":["/home/rgukt-basar/Downloads/placement-prep-starter/client/src/components/PostJob.js"],"sourcesContent":["/*import { useState } from \"react\";\nimport { ethers } from \"ethers\";\nimport axios from \"axios\";\n\nfunction PostJob() {\n  const [mode, setMode] = useState(\"paid\"); // \"paid\" or \"free\"\n\n  const [form, setForm] = useState({\n    _id: \"\",\n    profile: \"\",\n    desc: \"\",\n    exp: \"\",\n    techs: \"\",\n  });\n\n  const [walletAddress, setWalletAddress] = useState(\"\");\n  const [paid, setPaid] = useState(false);\n  const platformFee = \"0.001\"; // ETH or MATIC\n\n  const handleChange = (e) => {\n    setForm({ ...form, [e.target.name]: e.target.value });\n  };\n\n  const connectWallet = async () => {\n    if (!window.ethereum) return alert(\"MetaMask not detected\");\n\n    try {\n      const provider = new ethers.BrowserProvider(window.ethereum);\n      const accounts = await window.ethereum.request({ method: \"eth_requestAccounts\" });\n      setWalletAddress(accounts[0]);\n    } catch (err) {\n      alert(\"Wallet connection failed\");\n    }\n  };\n\n  const payPlatformFee = async () => {\n    try {\n      const provider = new ethers.BrowserProvider(window.ethereum);\n      const signer = await provider.getSigner();\n      const tx = await signer.sendTransaction({\n        to: \"0xF2f8466780f45536bC254d0882A4F6608b631b88\",\n        value: ethers.parseEther(platformFee),\n      });\n      await tx.wait();\n      alert(\"Payment Successful\");\n      setPaid(true);\n    } catch (err) {\n      alert(\"Payment failed: \" + err.message);\n    }\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n\n    if (mode === \"paid\" && !paid) {\n      return alert(\"Please pay the platform fee first\");\n    }\n\n    const payload = {\n      ...form,\n      exp: parseInt(form.exp),\n      techs: form.techs.split(\",\").map((t) => t.trim()),\n    };\n\n    try {\n      const res = await axios.post(\"http://localhost:5000/api/jobs\", payload);\n      alert(res.data.message);\n    } catch (err) {\n      alert(\"Error: \" + err.response.data.error);\n    }\n  };\n\n  return (\n    <div style={containerStyle}>\n      <div style={formBox}>\n        <h2 style={headingStyle}>Post a New Job</h2>\n\n        {}\n        <div style={{ marginBottom: \"1rem\" }}>\n          <button onClick={() => setMode(\"paid\")} style={mode === \"paid\" ? activeBtn : inactiveBtn}>\n            Post With Payment\n          </button>\n          <button onClick={() => setMode(\"free\")} style={mode === \"free\" ? activeBtn : inactiveBtn}>\n            Post Without Payment (Demo)\n          </button>\n        </div>\n\n        {}\n        {mode === \"paid\" && !walletAddress && (\n          <button onClick={connectWallet} style={btnStyle}>Connect Wallet</button>\n        )}\n        {mode === \"paid\" && walletAddress && !paid && (\n          <button onClick={payPlatformFee} style={btnStyle}>Pay {platformFee} ETH</button>\n        )}\n        {mode === \"paid\" && paid && (\n          <p style={{ color: \"green\", fontWeight: \"bold\" }}>✔ Payment Complete</p>\n        )}\n\n        <form onSubmit={handleSubmit}>\n          <input name=\"_id\" placeholder=\"Job ID\" onChange={handleChange} required style={inputStyle} />\n          <input name=\"profile\" placeholder=\"Profile\" onChange={handleChange} required style={inputStyle} />\n          <textarea name=\"desc\" placeholder=\"Description\" onChange={handleChange} required style={textareaStyle} />\n          <input name=\"exp\" type=\"number\" placeholder=\"Experience (years)\" onChange={handleChange} required style={inputStyle} />\n          <input name=\"techs\" placeholder=\"Techs (comma separated)\" onChange={handleChange} required style={inputStyle} />\n          <button type=\"submit\" style={submitStyle}>\n            Post Job\n          </button>\n        </form>\n      </div>\n    </div>\n  );\n}\n\n// Styles\nconst containerStyle = {\n  display: \"flex\",\n  justifyContent: \"center\",\n  alignItems: \"center\",\n  minHeight: \"100vh\",\n  background: \"linear-gradient(to right, #e0c3fc, #8ec5fc)\",\n};\n\nconst formBox = {\n  background: \"#fff\",\n  padding: \"2rem\",\n  borderRadius: \"10px\",\n  boxShadow: \"0 4px 20px rgba(0, 0, 0, 0.1)\",\n  width: \"400px\",\n  textAlign: \"center\",\n};\n\nconst headingStyle = {\n  marginBottom: \"1rem\",\n  color: \"#4b0082\",\n};\n\nconst inputStyle = {\n  width: \"100%\",\n  padding: \"10px\",\n  marginBottom: \"1rem\",\n  border: \"1px solid #ccc\",\n  borderRadius: \"5px\",\n};\n\nconst textareaStyle = {\n  width: \"100%\",\n  padding: \"10px\",\n  height: \"80px\",\n  marginBottom: \"1rem\",\n  border: \"1px solid #ccc\",\n  borderRadius: \"5px\",\n};\n\nconst btnStyle = {\n  marginBottom: \"1rem\",\n  padding: \"10px 20px\",\n  backgroundColor: \"#6a1b9a\",\n  color: \"white\",\n  border: \"none\",\n  borderRadius: \"5px\",\n  cursor: \"pointer\",\n  fontSize: \"15px\",\n};\n\nconst submitStyle = {\n  width: \"100%\",\n  padding: \"12px\",\n  backgroundColor: \"#4b0082\",\n  color: \"white\",\n  border: \"none\",\n  borderRadius: \"6px\",\n  fontSize: \"16px\",\n  cursor: \"pointer\",\n};\n\nconst activeBtn = {\n  ...btnStyle,\n  backgroundColor: \"#4b0082\",\n  marginRight: \"10px\",\n};\n\nconst inactiveBtn = {\n  ...btnStyle,\n  backgroundColor: \"#bbb\",\n  marginRight: \"10px\",\n};\n\nexport default PostJob;*/\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}